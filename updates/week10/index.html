<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Week 10 · Sensors for Restoration</title>
  <link rel="stylesheet" href="../../style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <header>
    <h1>Project Updates — Week 10</h1>
    <nav>
      <a href="../../index.html">Home</a>
      <a href="../../updates.html">Updates</a>
      <a href="../../forum.html">Forum</a>
      <a href="../../about.html">About</a>
      <a href="../../contact.html">Contact</a>
    </nav>
  </header>
  <main>
    <article class="card update">
      <h3>Week 10 Team Updates</h3>
      <p><b>Housing</b></p>
      <p>Teted various masses with sand with our made prototype - got ranges for stability in tank situation. Must keep
        in note that this is
        not the same salinity as lake bardawill, so this data will be useful for getting the range and deviation in
        which we have to work in.
        We have confirmed that for certain masses our system will be more than stable enough! (restores to normal even
        when tilted 90 degrees horizontally.)
        Here is the data (in grams, total mass of the system):
        <ul>
        <li>1550 - tilted at a 10 degree angle(seems to be the instability border)</li>
        <li>1640 - Tilted at a 15 degree angle</li>
        <li>1775 - tilted at around 45 degree angle - still has restoring force</li>
        <li>1825 - tilted at around 50 degree angle - still has restoring force even when oriented horizontally.</li>
        <li>1950 (total) → stable tilted around 80 degree angle</li>
        <li> 1990 - stable horizontally.</li>
        <li>2035 - stable (even when horizontally oriented stands upright afterwards)</li>
        <li>2240 - (borderline stable) but Has enough restoring force to come up even when oriented completely horizontally</li>
        <li>2300 - only red part is above water but still has restoring foce even when oriented horizontally. Seems stable.</li>
        <li>2340 (this is the borderline point for our current system)</li>
        <li>2375 - sinks (unstable)</li>
        <li>2490 - unstable - just falls down</li>
        <li>Ideal Range: 1950 - 2340</li></ul>
      </p>
      <img src="./IMG_4394.jpg" alt="Testing Buoyancy with sand" style="max-width:100%;height:auto">
      <figcaption>Testing the system</figcaption>
      <p><b>Communications</b></p>
      <p>Received packets are now written to the SD card. Sending from the sensor also now works again.</p>
       <p><b>Sensing</b></p>
      <p>This week we created varying nitrate concentration with potassium nitrate using a 5-fold serial dilution starting from a 160 ppm concentration. We created 160 ppm, 80 ppm, 40 ppm, 20 ppm, and 10 ppm solutions and verified their concentrations with the API nitrate test. We can now proceed with testing the accuracy of nitrate testing using a peristaltic pump to mix the solution.
</p>
      <p><b>Electronics Water Depth</b></p>
      <p>Wired and adapted Arduino code to ESP32 for "Superior" Ultrasonic Water Depth Sensor. This sensor uses UART communication with a minimum range from 0 centimeters to 6 feet!</p>
      <img src="IMG_2702.JPG" alt="Working Ultrasonic Depth Sensor" style="max-width:100%;height:auto">
      <h3>DYP-L04 "Superior" Ultrasonic Sensor UART Code Adapted for ESP32 (Measures in Centimeters)</h3>
      <pre><code class="language-cpp">
        unsigned char buffer_RTT[4] = {0};
        uint8_t CS; //check sum 
        
        //defines pins and BAUD rate
        #define COM 0x55
        #define RXD2 16
        #define TXD2 17
        #define BAUD 115200
        
        //intializes class
        HardwareSerial sillySerial(2);
        
        int Distance = 0;
        void setup() {
        
          Serial.begin(115200);
          sillySerial.begin(BAUD, SERIAL_8N1, RXD2, TXD2);
          Serial.println("Serial 2 started at 9600 baud rate");
        
        }
        void loop() {
          sillySerial.write(COM);
          delay(100);
        
          //code will print available followed by the depth measurement 
        
          if(sillySerial.available() > 0){
            Serial.println("available");
            delay(4);
            
            if(sillySerial.read() == 0xff){    
              buffer_RTT[0] = 0xff;
        
              for (int i=1; i<4; i++){
                buffer_RTT[i] = sillySerial.read();
              }
              CS = buffer_RTT[0] + buffer_RTT[1]+ buffer_RTT[2];  
        
              if(buffer_RTT[3] == CS) {
                Distance = (buffer_RTT[1] << 8) + buffer_RTT[2];
                Serial.print("Distance:");
                Serial.print(Distance);
                Serial.println("mm");
              }
            }
          }
          else{
            Serial.println("not available");
          }
        }
      </code></pre>

    </article>
  </main>
  <footer>© <span id="y"></span> Sensors for Restoration</footer>
  <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
</body>

</html>
